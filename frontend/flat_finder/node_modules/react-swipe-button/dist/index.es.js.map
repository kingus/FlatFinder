{"version":3,"file":"index.es.js","sources":["../node_modules/style-inject/dist/style-inject.es.js","../src/index.js"],"sourcesContent":["function styleInject(css, ref) {\n  if ( ref === void 0 ) ref = {};\n  var insertAt = ref.insertAt;\n\n  if (!css || typeof document === 'undefined') { return; }\n\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nexport default styleInject;\n","import React, { Component } from 'react' \nimport styles from './styles.css'\n\nconst slider = React.createRef();\nconst container = React.createRef();\nconst isTouchDevice = 'ontouchstart' in document.documentElement\n\nexport default class ReactSwipeButton extends Component {\n  \n  isDragging = false;\n  sliderLeft = 0;\n\n  state = {}\n\n  componentDidMount() {\n    if(isTouchDevice) {\n      document.addEventListener('touchmove', this.onDrag);\n      document.addEventListener('touchend', this.stopDrag);\n    } else {\n      document.addEventListener('mousemove', this.onDrag);\n      document.addEventListener('mouseup', this.stopDrag);  \n    }\n    this.containerWidth = container.current.clientWidth - 50;\n  }\n\n  onDrag =e=> {\n    if(this.unmounted || this.state.unlocked) return;\n    if(this.isDragging) {\n      if(isTouchDevice) {\n        this.sliderLeft = Math.min(Math.max(0, e.touches[0].clientX - this.startX), this.containerWidth);\n      } else {\n        this.sliderLeft = Math.min(Math.max(0, e.clientX - this.startX), this.containerWidth);\n      }\n      this.updateSliderStyle();\n    }\n  }\n\n  updateSliderStyle =()=> {\n    if(this.unmounted || this.state.unlocked) return;\n    slider.current.style.left = (this.sliderLeft + 50)+'px';\n  }\n\n  stopDrag =()=> {\n    if(this.unmounted || this.state.unlocked) return;\n    if(this.isDragging) {\n      this.isDragging = false;\n      if(this.sliderLeft > this.containerWidth * 0.9) {\n        this.sliderLeft = this.containerWidth;\n        this.onSuccess();\n        if(this.props.onSuccess) {\n          this.props.onSuccess();\n        }\n      } else {\n        this.sliderLeft = 0;\n        if(this.props.onFailure) {\n          this.props.onFailure();\n        }\n      }\n      this.updateSliderStyle();\n    }\n  }\n\n  startDrag =e=> {\n    if(this.unmounted || this.state.unlocked) return;\n    this.isDragging = true;\n    if(isTouchDevice) {\n      this.startX = e.touches[0].clientX;\n    } else {\n      this.startX = e.clientX;\n    }\n  }\n\n  onSuccess =()=> {\n    container.current.style.width = container.current.clientWidth+'px';\n    this.setState({\n      unlocked: true\n    })\n  }\n\n  getText =()=> {\n    return this.state.unlocked ? (this.props.text_unlocked || 'UNLOCKED') : (this.props.text || 'SLIDE')\n  }\n\n  reset =()=> {\n    if(this.unmounted) return;\n    this.setState({unlocked: false}, ()=> {\n      this.sliderLeft = 0;\n      this.updateSliderStyle();\n    });\n  }\n\n  componentWillUnmount() {\n    this.unmounted = true;\n  }\n\n  render() { \n    return (\n      <div className={styles.ReactSwipeButton}>\n        <div className={styles.rsbContainer + ' ' + (this.state.unlocked ? styles.rsbContainerUnlocked : '')} ref={container}>\n          <div className={styles.rsbcSlider} \n            ref={slider} \n            onMouseDown={this.startDrag} \n            style={{background: this.props.color}}\n            onTouchStart={this.startDrag}>\n            <span className={styles.rsbcSliderText}>{this.getText()}</span>\n            <span className={styles.rsbcSliderArrow}></span>\n            <span className={styles.rsbcSliderCircle} style={{background: this.props.color}}></span>\n          </div>\n          <div className={styles.rsbcText}>{this.getText()}</div>\n        </div>\n      </div>\n    )\n  }\n}\n"],"names":["slider","React","createRef","container","isTouchDevice","document","documentElement","ReactSwipeButton","isDragging","sliderLeft","state","onDrag","unmounted","unlocked","Math","min","max","e","touches","clientX","startX","containerWidth","updateSliderStyle","current","style","left","stopDrag","onSuccess","props","onFailure","startDrag","width","clientWidth","setState","getText","text_unlocked","text","reset","addEventListener","styles","rsbContainer","rsbContainerUnlocked","rsbcSlider","background","color","rsbcSliderText","rsbcSliderArrow","rsbcSliderCircle","rsbcText","Component"],"mappings":"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"}